ស្រទាប់ data-link ទទួលខុសត្រូវលើការអនុវត្តនៃលំហូរ point-to-point និងយន្តការគ្រប់គ្រងកំហុស។

# Flow Control
---
នៅពេលដែល data frame (ទិន្នន័យស្រទាប់ទី២) ត្រូវបានផ្ញើពីម៉ាស៊ីនម្ចាស់មួយទៅម៉ាស៊ីនម្ចាស់មួយទៀតតាមរយៈមធ្យោបាយតែមួយ វាតម្រូវឱ្យអ្នកផ្ញើនិងអ្នកទទួលត្រូវធ្វើការក្នុងល្បឿនដូចគ្នា។ ពោលគឺ អ្នកផ្ញើផ្ញើក្នុងល្បឿនមួយដែលអ្នកទទួលអាចដំណើរការនិងទទួលយកទិន្នន័យបាន។ ចុះបើល្បឿន (hardware/software) របស់អ្នកផ្ញើឬអ្នកទទួលខុសគ្នា? បើអ្នកផ្ញើផ្ញើលឿនពេក អ្នកទទួលអាចនឹងលើសចំណុះ (swamped) ហើយទិន្នន័យអាចបាត់បង់។

យន្តការពីរប្រភេទអាចត្រូវបានប្រើប្រាស់ដើម្បីគ្រប់គ្រងលំហូរ:

## Stop and Wait
យន្តការគ្រប់គ្រងលំហូរនេះបង្ខំឱ្យអ្នកផ្ញើបន្ទាប់ពីបញ្ជូន data frame ឱ្យឈប់និងរង់ចាំរហូតដល់ការទទួលស្គាល់នៃ data-frame ដែលបានផ្ញើត្រូវបានទទួល។

![[Pasted image 20250201200916.png]]

## Sliding Window
ក្នុងយន្តការគ្រប់គ្រងលំហូរនេះ ទាំងអ្នកផ្ញើនិងអ្នកទទួលព្រមព្រៀងគ្នាលើចំនួននៃ data-frames ដែលអាចត្រូវបានផ្ញើមុនពេលទទួលបានការទទួលស្គាល់។ ដូចដែលយើងបានរៀន យន្តការគ្រប់គ្រងលំហូរ stop and wait ខ្ជះខ្ជាយធនធាន ពិធីការនេះព្យាយាមប្រើប្រាស់ធនធានមូលដ្ឋានឱ្យបានច្រើនតាមដែលអាចធ្វើទៅបាន។

# Error Control
---
នៅពេលដែល data-frame ត្រូវបានបញ្ជូន វាមានលទ្ធភាពដែល data-frame អាចបាត់បង់ក្នុងការបញ្ជូន ឬទទួលបានដោយខូច។ ក្នុងករណីទាំងពីរ អ្នកទទួលមិនទទួលបាន data-frame ត្រឹមត្រូវ ហើយអ្នកផ្ញើក៏មិនដឹងអំពីការបាត់បង់នេះដែរ។ ក្នុងករណីបែបនេះ ទាំងអ្នកផ្ញើនិងអ្នកទទួលត្រូវបានបំពាក់ដោយពិធីការមួយចំនួនដែលជួយពួកគេឱ្យរកឃើញកំហុសដូចជាការបាត់បង់ data-frame។ ដូច្នេះ អ្នកផ្ញើបញ្ជូន data-frame ម្តងទៀត ឬអ្នកទទួលអាចស្នើសុំឱ្យបញ្ជូន data-frame មុនម្តងទៀត។

តម្រូវការសម្រាប់យន្តការគ្រប់គ្រងកំហុស៖

- **ការរកឃើញកំហុស (Error detection):** អ្នកផ្ញើនិងអ្នកទទួល ទាំងពីរឬណាមួយ ត្រូវតែប្រាកដថាមានកំហុសក្នុងការបញ្ជូន។

- **ការទទួលស្គាល់វិជ្ជមាន (Positive ACK):** នៅពេលអ្នកទទួលទទួលបាន frame ត្រឹមត្រូវ គួរតែទទួលស្គាល់វា។

- **ការទទួលស្គាល់អវិជ្ជមាន (Negative ACK):** នៅពេលអ្នកទទួលទទួលបាន frame ដែលខូច ឬស្ទួន វាផ្ញើ NACK ត្រឡប់ទៅអ្នកផ្ញើវិញ ហើយអ្នកផ្ញើត្រូវតែបញ្ជូន frame ត្រឹមត្រូវម្តងទៀត។

- **ការបញ្ជូនឡើងវិញ (Retransmission):** អ្នកផ្ញើរក្សានាឡិកាមួយ និងកំណត់ពេលវេលាផុតកំណត់។ ប្រសិនបើការទទួលស្គាល់នៃ data-frame ដែលបានបញ្ជូនពីមុនមិនមកដល់មុនពេលផុតកំណត់ អ្នកផ្ញើនឹងបញ្ជូនឡើងវិញនូវ frame ដោយគិតថា frame ឬការទទួលស្គាល់របស់វាបានបាត់បង់ក្នុងការបញ្ជូន។

មានបច្ចេកទេសបីប្រភេទដែល Data-link layer អាចប្រើដើម្បីគ្រប់គ្រងកំហុសដោយ Automatic Repeat Requests (ARQ)៖

## Stop and wait ARQ
![[Pasted image 20250201201230.png]]

ការផ្លាស់ប្តូរខាងក្រោមអាចកើតឡើងនៅក្នុង Stop-and-Wait ARQ៖

- sender រក្សាទុក timeout counter មួយ។

- នៅពេលដែល frame ត្រូវបានផ្ញើ sender ចាប់ផ្តើម timeout counter។

- ប្រសិនបើការទទួលស្គាល់នៃ frame មកដល់ទាន់ពេល sender ផ្ញើ frame បន្ទាប់នៅក្នុង queue។

- ប្រសិនបើការទទួលស្គាល់មិនមកដល់ទាន់ពេល sender សន្មត់ថា frame ឬការទទួលស្គាល់របស់វាត្រូវបានបាត់បង់ក្នុងពេលផ្ទេរ។ Sender ផ្ញើ frame ម្តងទៀត និងចាប់ផ្តើម timeout counter។

- ប្រសិនបើទទួលបានការទទួលស្គាល់អវិជ្ជមាន sender ផ្ញើ frame ម្តងទៀត។

## Go-Back-N ARQ
យន្តការ Stop and wait ARQ មិនប្រើប្រាស់ធនធានឱ្យបានល្អបំផុតទេ។ នៅពេលដែលការទទួលស្គាល់ត្រូវបានទទួល sender ត្រូវរង់ចាំរហូតដល់ timeout។ នៅក្នុងវិធីសាស្ត្រ ARQ នេះ ទាំង sender និង receiver រក្សាទុក window មួយ។

![[Pasted image 20250201201533.png]]

ទំហំ sending-window អនុញ្ញាតឱ្យអ្នកផ្ញើអាចផ្ញើ frames ច្រើនដោយមិនចាំបាច់ទទួលបានការបញ្ជាក់ពី frames មុនៗ។ ទំហំ receiving-window អនុញ្ញាតឱ្យអ្នកទទួលអាចទទួល frames ច្រើននិងបញ្ជាក់ទទួលពួកវា។ អ្នកទទួលរក្សាទុកការតាមដាននូវលេខរៀង sequence number នៃ frames ដែលកំពុងចូលមក។

នៅពេលដែលអ្នកផ្ញើផ្ញើ frames ទាំងអស់នៅក្នុង window វាពិនិត្យមើលថាតើវាបានទទួលការបញ្ជាក់ទទួលរហូតដល់លេខ sequence number ណា។ ប្រសិនបើ frames ទាំងអស់ត្រូវបានបញ្ជាក់ទទួលវិជ្ជមាន អ្នកផ្ញើនឹងផ្ញើ frames បន្ទាប់។ ប្រសិនបើអ្នកផ្ញើរកឃើញថាវាបានទទួល NACK ឬមិនបានទទួល ACK សម្រាប់ frame ជាក់លាក់មួយ វានឹងផ្ញើឡើងវិញនូវ frames ទាំងអស់បន្ទាប់ពីនោះដែលវាមិនទទួលបាន positive ACK។

## Selective Repeat ARQ
នៅក្នុង Go-back-N ARQ គេសន្មតថាអ្នកទទួលមិនមានកន្លែង buffer space សម្រាប់ទំហំ window របស់ខ្លួន និងត្រូវតែដំណើរការ frames តាមលំដាប់។ នេះតម្រូវឱ្យអ្នកផ្ញើផ្ញើឡើងវិញនូវ frames ទាំងអស់ដែលមិនត្រូវបានទទួលស្គាល់។

![[Pasted image 20250201201623.png]]

នៅក្នុង Selective-Repeat ARQ អ្នកទទួល ខណៈពេលដែលតាមដានលេខរៀងនៃ sequence numbers រក្សាទុក frames នៅក្នុងអង្គចងចាំ ហើយផ្ញើ NACK សម្រាប់តែ frame ដែលបាត់ ឬខូច។

អ្នកផ្ញើក្នុងករណីនេះ ផ្ញើតែកញ្ចប់ទិន្នន័យដែលបានទទួល NACK តែប៉ុណ្ណោះ។

